---
title: "Zennのgithubリポジトリ用意したよ"
emoji: "🐈"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["zenn-cli"]
published: false
---

# はじめに

[Zenn CLIをインストールする](https://zenn.dev/zenn/articles/install-zenn-cli)という記事を元にこのリポジトリを作りました。

せっかくなのでdevcontainerとして動かせるようにし、ポータビリティを向上させてみました。

githubのリポジトリを見てもらえれば基本的には伝わると思いますが、実際に時間がかかったポイントだけ紹介します。

[githubリポジトリ](https://github.com/Ko1103/zenn)



# ポイント

## Node.js v22だとzenn-cliのコマンドが動作しなかった

2024/8/11の時点で、zenn-cliはNode.js v22だと動かない。
zenn-cliもしくはそれが参照しているnode_modulesの中でNode.jsが提供しているpunycodeに依存しているから。
最初Dockerfileで参照するnodejsをv22にしていたら動かなかった

TODO: Githubでissueが上がっていなければ提出

## ZennのVSCodeの拡張便利

本来プレビューコマンドを実行して動かしたりするところを拡張だとクリックでしかもmarkdownファイルの横にプレビューできるのは便利ですね。

```json
	// Features to add to the dev container. More info: https://containers.dev/features.
	// "features": {},
	// Use 'forwardPorts' to make a list of ports inside the container available locally.
	// "forwardPorts": [],
	// Use 'postCreateCommand' to run commands after the container is created.
	// "postCreateCommand": "yarn install",
	// Configure tool-specific properties.
	"customizations": {
		// Configure properties specific to VS Code.
		"vscode": {
			// Add the IDs of extensions you want installed when the container is created.
			"extensions": [
				"dbaeumer.vscode-eslint",
				"editor.quickSuggestions"
			]
		}
	},
```

## DevContainerでgitのssh設定

最初はgitコマンドだけlocalでもいいかとか思っていましたが、ここまでVSCode上で完結するようになっていたらむしろやったほうが楽なので対応しました。

```shell
ssh-add $HOME/.ssh/id_rsa
```

githubのsshキーのファイル名がid_rsaじゃない場合は変更お願いしてください。

# 参考

- https://zenn.dev/zenn/articles/install-zenn-cli
- https://github.com/Ko1103/zenn
- https://code.visualstudio.com/remote/advancedcontainers/sharing-git-credentials#_using-ssh-keys